webpackJsonp([2],{"0xDb":function(t,e,a){"use strict";function r(t){var e=parseInt(t%3600/60)+"",a=parseInt(t%60)+"";return e.padStart(2,"0")+":"+a.padStart(2,"0")}function s(t){var e=t.split(":");return(60*e[0]+1*e[1]).toFixed(2)}function n(t){for(var e=[];;){var a=Math.floor(Math.random()*t.length);if(-1==e.indexOf(t[a])&&(e.push(t[a]),e.length==t.length))return e}}e.a=r,e.c=s,e.b=n},WCt8:function(t,e){},pNhM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,s,n=a("rzQm"),i=a.n(n),u=a("Z60a"),c=a.n(u),o=a("j/rp"),l=a.n(o),h=a("C9uT"),m=a.n(h),f=a("T/v0"),p=a.n(f),d=a("tNLN"),g=a.n(d),y=a("GiK3"),v=a.n(y),w=a("S6G3"),E=(a.n(w),a("0xDb")),T=a("WCt8"),N=a.n(T),b=(r=Object(w.connect)(function(t){var e=t.play;return console.log("play..",e),e},function(t){return{}}))(s=function(t){function e(){var t;return c()(this,e),t=p()(this,g()(e).call(this)),t.state={rightAnser:[],answers:new Array(10),answerList:[],current:0,isPlay:!1,progress:0,tempTime:{start:0,end:0}},t}return m()(e,[{key:"randomAnswer",value:function(){this.setState({answerList:Object(E.b)(this.state.rightAnser)})}},{key:"componentDidMount",value:function(){this.randomAnswer()}},{key:"startPlay",value:function(){var t=this;console.log("e...\u5f00\u59cb\u64ad\u653e",this.refs.audio.duration);var e=Math.floor(Math.random()*(this.refs.audio.duration-10));this.setState({tempTime:{start:e,end:e+10}},function(){i()(document.querySelectorAll("ul button")).forEach(function(t){t.className=t.className.replace(" error","").replace(" success","")}),t.refs.audio.pause(),t.refs.audio.currentTime=e,t.refs.audio.play()})}},{key:"timeUpdate",value:function(){var t=this;this.refs.audio.currentTime>this.state.tempTime.end&&(this.refs.audio.pause(),9==this.state.current?console.log("this.answers...",this.state.answers):this.setState({current:(this.state.current+1)%10},function(){t.refs.audio.play()})),this.setState({progress:Math.floor((this.refs.audio.currentTime-this.state.tempTime.start)/10*100)})}},{key:"play",value:function(){var t=this;this.setState({isPlay:!this.state.isPlay},function(){t.state.isPlay?t.refs.audio.play():t.refs.audio.pause()})}},{key:"answer",value:function(t){if(!this.state.answers[this.state.current]&&t.target!=t.currentTarget){var e=t.target.innerText,a=i()(this.state.answers);a[this.state.current]=e,this.setState({answers:a}),this.state.rightAnser[this.state.current]==e?t.target.className+=" success":t.target.className+=" error"}}},{key:"render",value:function(){var t=this;return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"song_what_wraper"},v.a.createElement("h2",{className:"song_what"},"\u6b4c\u66f2\u731c\u731c\u731c"),v.a.createElement("ul",{onClick:this.answer.bind(this)},this.state.answerList.map(function(t){return v.a.createElement("button",{className:N.a.answer,key:t},t)})),v.a.createElement("div",null,v.a.createElement("span",null,"00."+this.currentTime),v.a.createElement("div",{className:"progress"},v.a.createElement("p",{ref:"progress"},v.a.createElement("span",{style:{width:this.state.progress+"%"},className:"progress_run"}))),v.a.createElement("span",null,"00.10")),v.a.createElement("button",{onClick:this.play.bind(this)},this.state.isPlay?"\u6682\u505c":"\u64ad\u653e"),v.a.createElement("span",null,"".concat(this.state.current+1,"/10")),v.a.createElement("audio",{crossOrigin:"anonymous",src:this.props.distiguishList[this.state.current].url,ref:"audio",onTimeUpdate:function(){return t.timeUpdate()},onLoadedMetadata:function(){return t.startPlay()}}),v.a.createElement("ul",{className:N.a.list},v.a.createElement("h2",null,"\u731c\u6b4c\u7ed3\u679c"),this.state.answers.map(function(e,a){return v.a.createElement("li",null,v.a.createElement("span",null,a+1),v.a.createElement("span",null,"\u7b54\u6848\uff1a",e),v.a.createElement("span",{className:"current"},e==t.state.rightAnser[a]?"\u731c\u5bf9":"\u731c\u9519"))}))))}},{key:"currentTime",get:function(){return this.refs.audio&&this.refs.audio.currentTime?(Math.floor(this.refs.audio.currentTime-this.state.tempTime.start)+"").padStart(2,"0"):"00"}}],[{key:"getDerivedStateFromProps",value:function(t,e){return{rightAnser:t.distiguishList.map(function(t){return t.name.name})}}}]),l()(e,t),e}(v.a.PureComponent))||s;e.default=b}});